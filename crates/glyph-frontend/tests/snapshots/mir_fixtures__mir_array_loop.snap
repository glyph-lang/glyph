---
source: crates/glyph-frontend/tests/mir_fixtures.rs
expression: out.mir
---
MirModule {
    struct_types: {},
    functions: [
        MirFunction {
            name: "sum_array",
            ret_type: Some(
                I32,
            ),
            params: [],
            locals: [
                Local {
                    name: Some(
                        "arr",
                    ),
                    ty: Some(
                        Array(
                            I32,
                            4,
                        ),
                    ),
                },
                Local {
                    name: None,
                    ty: Some(
                        Array(
                            I32,
                            4,
                        ),
                    ),
                },
                Local {
                    name: Some(
                        "sum",
                    ),
                    ty: None,
                },
                Local {
                    name: Some(
                        "i",
                    ),
                    ty: None,
                },
                Local {
                    name: None,
                    ty: Some(
                        I32,
                    ),
                },
                Local {
                    name: None,
                    ty: Some(
                        Bool,
                    ),
                },
                Local {
                    name: None,
                    ty: Some(
                        I32,
                    ),
                },
                Local {
                    name: None,
                    ty: None,
                },
                Local {
                    name: None,
                    ty: Some(
                        I32,
                    ),
                },
            ],
            blocks: [
                MirBlock {
                    insts: [
                        Assign {
                            local: LocalId(
                                1,
                            ),
                            value: ArrayLit {
                                elem_type: I32,
                                elements: [
                                    Int(
                                        10,
                                    ),
                                    Int(
                                        20,
                                    ),
                                    Int(
                                        30,
                                    ),
                                    Int(
                                        40,
                                    ),
                                ],
                            },
                        },
                        Assign {
                            local: LocalId(
                                0,
                            ),
                            value: Move(
                                LocalId(
                                    1,
                                ),
                            ),
                        },
                        Assign {
                            local: LocalId(
                                2,
                            ),
                            value: ConstInt(
                                0,
                            ),
                        },
                        Assign {
                            local: LocalId(
                                3,
                            ),
                            value: ConstInt(
                                0,
                            ),
                        },
                        Goto(
                            BlockId(
                                1,
                            ),
                        ),
                    ],
                },
                MirBlock {
                    insts: [
                        Assign {
                            local: LocalId(
                                4,
                            ),
                            value: ArrayLen {
                                base: LocalId(
                                    0,
                                ),
                            },
                        },
                        Assign {
                            local: LocalId(
                                5,
                            ),
                            value: Binary {
                                op: Lt,
                                lhs: Local(
                                    LocalId(
                                        3,
                                    ),
                                ),
                                rhs: Local(
                                    LocalId(
                                        4,
                                    ),
                                ),
                            },
                        },
                        If {
                            cond: Local(
                                LocalId(
                                    5,
                                ),
                            ),
                            then_bb: BlockId(
                                2,
                            ),
                            else_bb: BlockId(
                                3,
                            ),
                        },
                    ],
                },
                MirBlock {
                    insts: [
                        Assign {
                            local: LocalId(
                                6,
                            ),
                            value: ArrayIndex {
                                base: LocalId(
                                    0,
                                ),
                                index: Local(
                                    LocalId(
                                        3,
                                    ),
                                ),
                                bounds_check: true,
                            },
                        },
                        Assign {
                            local: LocalId(
                                7,
                            ),
                            value: Binary {
                                op: Add,
                                lhs: Local(
                                    LocalId(
                                        2,
                                    ),
                                ),
                                rhs: Local(
                                    LocalId(
                                        6,
                                    ),
                                ),
                            },
                        },
                        Assign {
                            local: LocalId(
                                2,
                            ),
                            value: Move(
                                LocalId(
                                    7,
                                ),
                            ),
                        },
                        Assign {
                            local: LocalId(
                                8,
                            ),
                            value: Binary {
                                op: Add,
                                lhs: Local(
                                    LocalId(
                                        3,
                                    ),
                                ),
                                rhs: Int(
                                    1,
                                ),
                            },
                        },
                        Assign {
                            local: LocalId(
                                3,
                            ),
                            value: Move(
                                LocalId(
                                    8,
                                ),
                            ),
                        },
                        Goto(
                            BlockId(
                                1,
                            ),
                        ),
                    ],
                },
                MirBlock {
                    insts: [
                        Return(
                            Some(
                                Local(
                                    LocalId(
                                        2,
                                    ),
                                ),
                            ),
                        ),
                    ],
                },
            ],
        },
    ],
}
